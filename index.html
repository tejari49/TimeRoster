<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeRoster - Modern Time Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-main: #f8fafc;
            --bg-card: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            padding: 2rem 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            padding: 0 2rem;
            margin-bottom: 2rem;
        }

        .logo h1 {
            font-size: 1.75rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .logo p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .nav-menu {
            list-style: none;
            padding: 0 1rem;
        }

        .nav-item {
            margin-bottom: 0.5rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.875rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.75rem;
            transition: all 0.2s;
            cursor: pointer;
            font-weight: 500;
        }

        .nav-link:hover {
            background: var(--bg-main);
            color: var(--text-primary);
        }

        .nav-link.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .nav-icon {
            margin-right: 0.75rem;
            font-size: 1.25rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 2rem;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .page-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px var(--shadow);
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        /* Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .stat-card.success {
            border-left-color: var(--success);
        }

        .stat-card.warning {
            border-left-color: var(--warning);
        }

        .stat-card.danger {
            border-left-color: var(--danger);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-secondary {
            background: var(--bg-main);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            font-size: 0.95rem;
            transition: all 0.2s;
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Calendar */
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .calendar-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            padding: 0.75rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            padding: 0.75rem;
            border-radius: 0.75rem;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            background: var(--bg-card);
        }

        .calendar-day:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow);
        }

        .calendar-day.today {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border-color: var(--primary);
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        .calendar-day.has-events {
            background: rgba(99, 102, 241, 0.1);
        }

        .day-number {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .event-indicator {
            font-size: 0.75rem;
            background: var(--secondary);
            color: white;
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
            margin-top: auto;
        }

        /* Events List */
        .events-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .event-item {
            padding: 1rem;
            border-radius: 0.75rem;
            background: var(--bg-main);
            margin-bottom: 0.75rem;
            border-left: 4px solid var(--primary);
        }

        .event-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .event-time {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Shift Plan */
        .shift-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .shift-card {
            padding: 1rem;
            border-radius: 0.75rem;
            background: var(--bg-main);
            border: 2px solid var(--border);
            transition: all 0.2s;
        }

        .shift-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .shift-date {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .shift-time {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .shift-type {
            display: inline-block;
            margin-top: 0.5rem;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .shift-type.morning {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .shift-type.afternoon {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .shift-type.night {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
        }

        /* Time Tracking */
        .time-tracker {
            text-align: center;
            padding: 2rem;
        }

        .current-time {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .status-indicator.clocked-in {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .status-indicator.clocked-out {
            background: rgba(100, 116, 139, 0.1);
            color: var(--text-secondary);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .time-log {
            margin-top: 2rem;
            text-align: left;
        }

        .log-entry {
            padding: 1rem;
            background: var(--bg-main);
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .log-info {
            display: flex;
            flex-direction: column;
        }

        .log-date {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .log-time {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .log-duration {
            font-weight: 600;
            color: var(--primary);
        }

        /* TODO List */
        .todo-input-group {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .todo-input-group .form-input {
            flex: 1;
            margin-bottom: 0;
        }

        .todo-list {
            list-style: none;
        }

        .todo-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-main);
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
            transition: all 0.2s;
        }

        .todo-item:hover {
            transform: translateX(4px);
        }

        .todo-item.completed {
            opacity: 0.6;
        }

        .todo-item.completed .todo-text {
            text-decoration: line-through;
        }

        .todo-checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .todo-text {
            flex: 1;
            color: var(--text-primary);
        }

        .todo-priority {
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .todo-priority.high {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .todo-priority.medium {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .todo-priority.low {
            background: rgba(100, 116, 139, 0.1);
            color: var(--text-secondary);
        }

        .todo-delete {
            background: none;
            border: none;
            color: var(--danger);
            cursor: pointer;
            font-size: 1.25rem;
            padding: 0.25rem;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .todo-item:hover .todo-delete {
            opacity: 1;
        }

        /* Settings */
        .settings-section {
            margin-bottom: 2rem;
        }

        .settings-section-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--bg-main);
            color: var(--text-primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 1px solid var(--border);
                padding: 1rem 0;
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
            }

            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                gap: 0.25rem;
            }

            .calendar-day {
                padding: 0.5rem;
                font-size: 0.875rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .current-time {
                font-size: 2rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page.active {
            animation: fadeIn 0.3s ease;
        }

        /* Utility Classes */
        .mt-2 { margin-top: 1rem; }
        .mb-2 { margin-bottom: 1rem; }
        .text-center { text-align: center; }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <h1>‚è∞ TimeRoster</h1>
                <p>Modern Time Management</p>
            </div>
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a class="nav-link active" data-page="dashboard">
                            <span class="nav-icon">üìä</span>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-page="calendar">
                            <span class="nav-icon">üìÖ</span>
                            <span>Calendar</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-page="shifts">
                            <span class="nav-icon">üë•</span>
                            <span>Shift Plan</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-page="timetracking">
                            <span class="nav-icon">‚è±Ô∏è</span>
                            <span>Time Tracking</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-page="todos">
                            <span class="nav-icon">‚úì</span>
                            <span>TODOs</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-page="settings">
                            <span class="nav-icon">‚öôÔ∏è</span>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="page-header">
                    <h1 class="page-title">Dashboard</h1>
                    <p class="page-subtitle">Welcome back! Here's your overview</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Total Hours This Week</div>
                        <div class="stat-value" id="weekHours">0h</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-label">Completed Tasks</div>
                        <div class="stat-value" id="completedTasks">0</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-label">Upcoming Shifts</div>
                        <div class="stat-value" id="upcomingShifts">0</div>
                    </div>
                    <div class="stat-card danger">
                        <div class="stat-label">Pending TODOs</div>
                        <div class="stat-value" id="pendingTodos">0</div>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title">Today's Events</h2>
                    <div id="todayEvents" class="events-list">
                        <p class="text-secondary">No events scheduled for today</p>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title">Recent Activity</h2>
                    <div id="recentActivity">
                        <p class="text-secondary">No recent activity</p>
                    </div>
                </div>
            </div>

            <!-- Calendar Page -->
            <div id="calendar" class="page">
                <div class="page-header">
                    <h1 class="page-title">Calendar</h1>
                    <p class="page-subtitle">Manage your events and schedule</p>
                </div>

                <div class="card">
                    <div class="calendar-header">
                        <h2 class="card-title" id="calendarMonth">January 2024</h2>
                        <div class="calendar-controls">
                            <button class="btn btn-secondary" id="prevMonth">‚Äπ Prev</button>
                            <button class="btn btn-secondary" id="todayBtn">Today</button>
                            <button class="btn btn-secondary" id="nextMonth">Next ‚Ä∫</button>
                            <button class="btn btn-primary" id="addEventBtn">+ Add Event</button>
                        </div>
                    </div>
                    <div class="calendar-grid" id="calendarGrid"></div>
                </div>

                <div class="card">
                    <h2 class="card-title">All Events</h2>
                    <div id="allEvents" class="events-list"></div>
                </div>
            </div>

            <!-- Shift Plan Page -->
            <div id="shifts" class="page">
                <div class="page-header">
                    <h1 class="page-title">Shift Plan</h1>
                    <p class="page-subtitle">Manage your work shifts</p>
                </div>

                <div class="card">
                    <div class="calendar-header">
                        <h2 class="card-title">Your Shifts</h2>
                        <button class="btn btn-primary" id="addShiftBtn">+ Add Shift</button>
                    </div>
                    <div class="shift-grid" id="shiftsGrid"></div>
                </div>
            </div>

            <!-- Time Tracking Page -->
            <div id="timetracking" class="page">
                <div class="page-header">
                    <h1 class="page-title">Time Tracking</h1>
                    <p class="page-subtitle">Track your working hours</p>
                </div>

                <div class="card">
                    <div class="time-tracker">
                        <div class="current-time" id="currentTime">00:00:00</div>
                        <div class="status-indicator" id="statusIndicator">
                            <span class="status-dot"></span>
                            <span id="statusText">Not clocked in</span>
                        </div>
                        <div class="button-group" style="justify-content: center;">
                            <button class="btn btn-success" id="clockInBtn">üïê Clock In</button>
                            <button class="btn btn-danger" id="clockOutBtn" style="display: none;">üïê Clock Out</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title">Time Log</h2>
                    <div id="timeLog" class="time-log"></div>
                </div>
            </div>

            <!-- TODOs Page -->
            <div id="todos" class="page">
                <div class="page-header">
                    <h1 class="page-title">TODOs</h1>
                    <p class="page-subtitle">Manage your tasks and priorities</p>
                </div>

                <div class="card">
                    <div class="todo-input-group">
                        <input type="text" class="form-input" id="todoInput" placeholder="Add a new task...">
                        <select class="form-select" id="todoPriority" style="width: 150px;">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                        <button class="btn btn-primary" id="addTodoBtn">+ Add</button>
                    </div>
                    <ul class="todo-list" id="todoList"></ul>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings" class="page">
                <div class="page-header">
                    <h1 class="page-title">Settings</h1>
                    <p class="page-subtitle">Manage your data and preferences</p>
                </div>

                <div class="card">
                    <div class="settings-section">
                        <h3 class="settings-section-title">Data Management</h3>
                        <p class="page-subtitle mb-2">Export or import your data as JSON</p>
                        <div class="button-group">
                            <button class="btn btn-primary" id="exportBtn">üì• Export Data</button>
                            <button class="btn btn-secondary" id="importBtn">üì§ Import Data</button>
                            <input type="file" id="importFile" accept=".json" style="display: none;">
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3 class="settings-section-title">Storage Info</h3>
                        <div class="stat-card">
                            <div class="stat-label">Events Stored</div>
                            <div class="stat-value" id="eventsCount">0</div>
                        </div>
                        <div class="stat-card mt-2">
                            <div class="stat-label">Shifts Stored</div>
                            <div class="stat-value" id="shiftsCount">0</div>
                        </div>
                        <div class="stat-card mt-2">
                            <div class="stat-label">TODOs Stored</div>
                            <div class="stat-value" id="todosCount">0</div>
                        </div>
                        <div class="stat-card mt-2">
                            <div class="stat-label">Time Entries Stored</div>
                            <div class="stat-value" id="timeEntriesCount">0</div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3 class="settings-section-title">Danger Zone</h3>
                        <p class="page-subtitle mb-2">Clear all data from local storage</p>
                        <button class="btn btn-danger" id="clearDataBtn">üóëÔ∏è Clear All Data</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Event Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Event</h2>
                <button class="modal-close" id="closeEventModal">√ó</button>
            </div>
            <form id="eventForm">
                <div class="form-group">
                    <label class="form-label">Event Title</label>
                    <input type="text" class="form-input" id="eventTitle" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input" id="eventDate" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Time</label>
                    <input type="time" class="form-input" id="eventTime">
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" id="eventDescription"></textarea>
                </div>
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">Save Event</button>
                    <button type="button" class="btn btn-secondary" id="cancelEventBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Shift Modal -->
    <div id="shiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Shift</h2>
                <button class="modal-close" id="closeShiftModal">√ó</button>
            </div>
            <form id="shiftForm">
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input" id="shiftDate" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Start Time</label>
                    <input type="time" class="form-input" id="shiftStartTime" required>
                </div>
                <div class="form-group">
                    <label class="form-label">End Time</label>
                    <input type="time" class="form-input" id="shiftEndTime" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Shift Type</label>
                    <select class="form-select" id="shiftType">
                        <option value="morning">Morning</option>
                        <option value="afternoon">Afternoon</option>
                        <option value="night">Night</option>
                    </select>
                </div>
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">Save Shift</button>
                    <button type="button" class="btn btn-secondary" id="cancelShiftBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data Store
        class DataStore {
            constructor() {
                this.events = this.load('events') || [];
                this.shifts = this.load('shifts') || [];
                this.todos = this.load('todos') || [];
                this.timeEntries = this.load('timeEntries') || [];
                this.currentSession = this.load('currentSession') || null;
            }

            load(key) {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            }

            save(key, data) {
                localStorage.setItem(key, JSON.stringify(data));
            }

            addEvent(event) {
                event.id = Date.now();
                this.events.push(event);
                this.save('events', this.events);
            }

            addShift(shift) {
                shift.id = Date.now();
                this.shifts.push(shift);
                this.save('shifts', this.shifts);
            }

            addTodo(todo) {
                todo.id = Date.now();
                todo.completed = false;
                this.todos.push(todo);
                this.save('todos', this.todos);
            }

            toggleTodo(id) {
                const todo = this.todos.find(t => t.id === id);
                if (todo) {
                    todo.completed = !todo.completed;
                    this.save('todos', this.todos);
                }
            }

            deleteTodo(id) {
                this.todos = this.todos.filter(t => t.id !== id);
                this.save('todos', this.todos);
            }

            clockIn() {
                this.currentSession = {
                    startTime: new Date().toISOString(),
                    date: new Date().toISOString().split('T')[0]
                };
                this.save('currentSession', this.currentSession);
            }

            clockOut() {
                if (this.currentSession) {
                    const entry = {
                        id: Date.now(),
                        date: this.currentSession.date,
                        startTime: this.currentSession.startTime,
                        endTime: new Date().toISOString()
                    };
                    this.timeEntries.push(entry);
                    this.save('timeEntries', this.timeEntries);
                    this.currentSession = null;
                    this.save('currentSession', null);
                }
            }

            exportData() {
                return {
                    events: this.events,
                    shifts: this.shifts,
                    todos: this.todos,
                    timeEntries: this.timeEntries
                };
            }

            importData(data) {
                if (data.events) {
                    this.events = data.events;
                    this.save('events', this.events);
                }
                if (data.shifts) {
                    this.shifts = data.shifts;
                    this.save('shifts', this.shifts);
                }
                if (data.todos) {
                    this.todos = data.todos;
                    this.save('todos', this.todos);
                }
                if (data.timeEntries) {
                    this.timeEntries = data.timeEntries;
                    this.save('timeEntries', this.timeEntries);
                }
            }

            clearAll() {
                this.events = [];
                this.shifts = [];
                this.todos = [];
                this.timeEntries = [];
                this.currentSession = null;
                localStorage.clear();
            }
        }

        // Initialize
        const store = new DataStore();
        let currentMonth = new Date();

        // Navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function() {
                const pageName = this.getAttribute('data-page');
                
                // Update active nav
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                // Show page
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById(pageName).classList.add('active');
                
                // Refresh page content
                refreshPage(pageName);
            });
        });

        function refreshPage(pageName) {
            switch(pageName) {
                case 'dashboard':
                    updateDashboard();
                    break;
                case 'calendar':
                    renderCalendar();
                    renderAllEvents();
                    break;
                case 'shifts':
                    renderShifts();
                    break;
                case 'timetracking':
                    renderTimeLog();
                    updateClockStatus();
                    break;
                case 'todos':
                    renderTodos();
                    break;
                case 'settings':
                    updateStorageInfo();
                    break;
            }
        }

        // Dashboard
        function updateDashboard() {
            // Calculate stats
            const now = new Date();
            const weekStart = new Date(now);
            weekStart.setDate(now.getDate() - now.getDay());
            
            let weekHours = 0;
            store.timeEntries.forEach(entry => {
                const entryDate = new Date(entry.date);
                if (entryDate >= weekStart) {
                    const start = new Date(entry.startTime);
                    const end = new Date(entry.endTime);
                    weekHours += (end - start) / (1000 * 60 * 60);
                }
            });

            document.getElementById('weekHours').textContent = weekHours.toFixed(1) + 'h';
            document.getElementById('completedTasks').textContent = store.todos.filter(t => t.completed).length;
            
            const upcomingShifts = store.shifts.filter(s => new Date(s.date) >= now).length;
            document.getElementById('upcomingShifts').textContent = upcomingShifts;
            document.getElementById('pendingTodos').textContent = store.todos.filter(t => !t.completed).length;

            // Today's events
            const today = now.toISOString().split('T')[0];
            const todayEvents = store.events.filter(e => e.date === today);
            const todayEventsDiv = document.getElementById('todayEvents');
            
            if (todayEvents.length === 0) {
                todayEventsDiv.innerHTML = '<p style="color: var(--text-secondary);">No events scheduled for today</p>';
            } else {
                todayEventsDiv.innerHTML = todayEvents.map(event => `
                    <div class="event-item">
                        <div class="event-title">${event.title}</div>
                        <div class="event-time">${event.time || 'All day'}</div>
                    </div>
                `).join('');
            }
        }

        // Calendar
        function renderCalendar() {
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            
            // Update header
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                              'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('calendarMonth').textContent = `${monthNames[month]} ${year}`;
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();
            
            let html = '';
            
            // Day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                html += `<div class="calendar-day-header">${day}</div>`;
            });
            
            // Previous month days
            for (let i = firstDay - 1; i >= 0; i--) {
                html += `<div class="calendar-day other-month">
                    <div class="day-number">${daysInPrevMonth - i}</div>
                </div>`;
            }
            
            // Current month days
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const dateStr = date.toISOString().split('T')[0];
                const dayEvents = store.events.filter(e => e.date === dateStr);
                
                const isToday = date.toDateString() === today.toDateString();
                const hasEvents = dayEvents.length > 0;
                
                let classes = 'calendar-day';
                if (isToday) classes += ' today';
                if (hasEvents) classes += ' has-events';
                
                html += `<div class="${classes}" data-date="${dateStr}">
                    <div class="day-number">${day}</div>
                    ${hasEvents ? `<div class="event-indicator">${dayEvents.length} event${dayEvents.length > 1 ? 's' : ''}</div>` : ''}
                </div>`;
            }
            
            // Next month days
            const remainingDays = 42 - (firstDay + daysInMonth);
            for (let day = 1; day <= remainingDays; day++) {
                html += `<div class="calendar-day other-month">
                    <div class="day-number">${day}</div>
                </div>`;
            }
            
            document.getElementById('calendarGrid').innerHTML = html;
            
            // Add click handlers
            document.querySelectorAll('.calendar-day:not(.other-month)').forEach(day => {
                day.addEventListener('click', function() {
                    const date = this.getAttribute('data-date');
                    document.getElementById('eventDate').value = date;
                    openModal('eventModal');
                });
            });
        }

        function renderAllEvents() {
            const eventsDiv = document.getElementById('allEvents');
            
            if (store.events.length === 0) {
                eventsDiv.innerHTML = '<p style="color: var(--text-secondary);">No events yet. Click "Add Event" to create one.</p>';
                return;
            }
            
            const sortedEvents = [...store.events].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            eventsDiv.innerHTML = sortedEvents.map(event => {
                const date = new Date(event.date);
                const formattedDate = date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                return `
                    <div class="event-item">
                        <div class="event-title">${event.title}</div>
                        <div class="event-time">${formattedDate} ${event.time ? 'at ' + event.time : ''}</div>
                        ${event.description ? `<p style="color: var(--text-secondary); margin-top: 0.5rem;">${event.description}</p>` : ''}
                    </div>
                `;
            }).join('');
        }

        // Shifts
        function renderShifts() {
            const shiftsGrid = document.getElementById('shiftsGrid');
            
            if (store.shifts.length === 0) {
                shiftsGrid.innerHTML = '<p style="color: var(--text-secondary);">No shifts scheduled. Click "Add Shift" to create one.</p>';
                return;
            }
            
            const sortedShifts = [...store.shifts].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            shiftsGrid.innerHTML = sortedShifts.map(shift => {
                const date = new Date(shift.date);
                const formattedDate = date.toLocaleDateString('en-US', { 
                    weekday: 'short', 
                    month: 'short', 
                    day: 'numeric' 
                });
                
                return `
                    <div class="shift-card">
                        <div class="shift-date">${formattedDate}</div>
                        <div class="shift-time">${shift.startTime} - ${shift.endTime}</div>
                        <span class="shift-type ${shift.type}">${shift.type}</span>
                    </div>
                `;
            }).join('');
        }

        // Time Tracking
        function updateClockStatus() {
            const clockInBtn = document.getElementById('clockInBtn');
            const clockOutBtn = document.getElementById('clockOutBtn');
            const statusIndicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            
            if (store.currentSession) {
                clockInBtn.style.display = 'none';
                clockOutBtn.style.display = 'inline-flex';
                statusIndicator.className = 'status-indicator clocked-in';
                
                const start = new Date(store.currentSession.startTime);
                statusText.textContent = `Clocked in at ${start.toLocaleTimeString()}`;
            } else {
                clockInBtn.style.display = 'inline-flex';
                clockOutBtn.style.display = 'none';
                statusIndicator.className = 'status-indicator clocked-out';
                statusText.textContent = 'Not clocked in';
            }
        }

        function renderTimeLog() {
            const timeLogDiv = document.getElementById('timeLog');
            
            if (store.timeEntries.length === 0) {
                timeLogDiv.innerHTML = '<p style="color: var(--text-secondary);">No time entries yet. Click "Clock In" to start tracking.</p>';
                return;
            }
            
            const sortedEntries = [...store.timeEntries].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            timeLogDiv.innerHTML = sortedEntries.map(entry => {
                const start = new Date(entry.startTime);
                const end = new Date(entry.endTime);
                const duration = (end - start) / (1000 * 60 * 60);
                const date = new Date(entry.date);
                
                return `
                    <div class="log-entry">
                        <div class="log-info">
                            <div class="log-date">${date.toLocaleDateString('en-US', { 
                                weekday: 'short', 
                                month: 'short', 
                                day: 'numeric' 
                            })}</div>
                            <div class="log-time">${start.toLocaleTimeString()} - ${end.toLocaleTimeString()}</div>
                        </div>
                        <div class="log-duration">${duration.toFixed(2)}h</div>
                    </div>
                `;
            }).join('');
        }

        // TODOs
        function renderTodos() {
            const todoList = document.getElementById('todoList');
            
            if (store.todos.length === 0) {
                todoList.innerHTML = '<p style="color: var(--text-secondary);">No tasks yet. Add one above to get started!</p>';
                return;
            }
            
            // Sort: incomplete first, then by priority
            const sortedTodos = [...store.todos].sort((a, b) => {
                if (a.completed !== b.completed) return a.completed ? 1 : -1;
                const priorityOrder = { high: 0, medium: 1, low: 2 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });
            
            todoList.innerHTML = sortedTodos.map(todo => `
                <li class="todo-item ${todo.completed ? 'completed' : ''}">
                    <input type="checkbox" class="todo-checkbox" ${todo.completed ? 'checked' : ''} 
                           onchange="toggleTodo(${todo.id})">
                    <span class="todo-text">${todo.text}</span>
                    <span class="todo-priority ${todo.priority}">${todo.priority}</span>
                    <button class="todo-delete" onclick="deleteTodo(${todo.id})">√ó</button>
                </li>
            `).join('');
        }

        function toggleTodo(id) {
            store.toggleTodo(id);
            renderTodos();
            updateDashboard();
        }

        function deleteTodo(id) {
            if (confirm('Are you sure you want to delete this task?')) {
                store.deleteTodo(id);
                renderTodos();
                updateDashboard();
            }
        }

        // Settings
        function updateStorageInfo() {
            document.getElementById('eventsCount').textContent = store.events.length;
            document.getElementById('shiftsCount').textContent = store.shifts.length;
            document.getElementById('todosCount').textContent = store.todos.length;
            document.getElementById('timeEntriesCount').textContent = store.timeEntries.length;
        }

        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Update clock
        function updateClock() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString();
            document.getElementById('currentTime').textContent = timeStr;
        }

        setInterval(updateClock, 1000);
        updateClock();

        // Event Listeners
        document.getElementById('prevMonth').addEventListener('click', () => {
            currentMonth.setMonth(currentMonth.getMonth() - 1);
            renderCalendar();
        });

        document.getElementById('nextMonth').addEventListener('click', () => {
            currentMonth.setMonth(currentMonth.getMonth() + 1);
            renderCalendar();
        });

        document.getElementById('todayBtn').addEventListener('click', () => {
            currentMonth = new Date();
            renderCalendar();
        });

        document.getElementById('addEventBtn').addEventListener('click', () => {
            document.getElementById('eventDate').value = new Date().toISOString().split('T')[0];
            openModal('eventModal');
        });

        document.getElementById('closeEventModal').addEventListener('click', () => {
            closeModal('eventModal');
        });

        document.getElementById('cancelEventBtn').addEventListener('click', () => {
            closeModal('eventModal');
        });

        document.getElementById('eventForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const event = {
                title: document.getElementById('eventTitle').value,
                date: document.getElementById('eventDate').value,
                time: document.getElementById('eventTime').value,
                description: document.getElementById('eventDescription').value
            };
            
            store.addEvent(event);
            renderCalendar();
            renderAllEvents();
            updateDashboard();
            
            closeModal('eventModal');
            e.target.reset();
        });

        document.getElementById('addShiftBtn').addEventListener('click', () => {
            document.getElementById('shiftDate').value = new Date().toISOString().split('T')[0];
            openModal('shiftModal');
        });

        document.getElementById('closeShiftModal').addEventListener('click', () => {
            closeModal('shiftModal');
        });

        document.getElementById('cancelShiftBtn').addEventListener('click', () => {
            closeModal('shiftModal');
        });

        document.getElementById('shiftForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const shift = {
                date: document.getElementById('shiftDate').value,
                startTime: document.getElementById('shiftStartTime').value,
                endTime: document.getElementById('shiftEndTime').value,
                type: document.getElementById('shiftType').value
            };
            
            store.addShift(shift);
            renderShifts();
            updateDashboard();
            
            closeModal('shiftModal');
            e.target.reset();
        });

        document.getElementById('clockInBtn').addEventListener('click', () => {
            store.clockIn();
            updateClockStatus();
        });

        document.getElementById('clockOutBtn').addEventListener('click', () => {
            store.clockOut();
            updateClockStatus();
            renderTimeLog();
            updateDashboard();
        });

        document.getElementById('addTodoBtn').addEventListener('click', () => {
            const input = document.getElementById('todoInput');
            const priority = document.getElementById('todoPriority').value;
            
            if (input.value.trim()) {
                store.addTodo({
                    text: input.value.trim(),
                    priority: priority
                });
                
                input.value = '';
                renderTodos();
                updateDashboard();
            }
        });

        document.getElementById('todoInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('addTodoBtn').click();
            }
        });

        document.getElementById('exportBtn').addEventListener('click', () => {
            const data = store.exportData();
            const json = JSON.stringify(data, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `timeroster-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        });

        document.getElementById('importBtn').addEventListener('click', () => {
            document.getElementById('importFile').click();
        });

        document.getElementById('importFile').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (confirm('This will replace your current data. Are you sure?')) {
                            store.importData(data);
                            alert('Data imported successfully!');
                            refreshPage('settings');
                        }
                    } catch (err) {
                        alert('Error importing data. Please check the file format.');
                    }
                };
                reader.readAsText(file);
            }
        });

        document.getElementById('clearDataBtn').addEventListener('click', () => {
            if (confirm('This will permanently delete all your data. Are you sure?')) {
                if (confirm('This action cannot be undone. Continue?')) {
                    store.clearAll();
                    alert('All data has been cleared.');
                    location.reload();
                }
            }
        });

        // Close modal when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });

        // Initialize
        updateDashboard();
        renderCalendar();
    </script>
</body>
</html>
